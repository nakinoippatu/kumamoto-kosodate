<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ç†Šæœ¬å¸‚ å­è‚²ã¦æ”¯æ´ è¬›ç¿’ä¼šã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼</title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&family=Kaisei+Decol:wght@400;700&display=swap" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/locales/ja.global.min.js"></script>
<style>
  :root {
    --cream: #fdf8f0;
    --warm-brown: #6b4c2a;
    --accent-orange: #e07b39;
    --accent-green: #5a9168;
    --accent-pink: #d4607e;
    --accent-blue: #4a7fab;
    --accent-purple: #7b5ea7;
    --light-orange: #fef0e4;
    --text-dark: #2c1f0e;
    --text-mid: #6b5742;
    --border: #e8d5bf;
    --shadow: rgba(107, 76, 42, 0.12);
  }

  * { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    font-family: 'Noto Sans JP', sans-serif;
    background: var(--cream);
    color: var(--text-dark);
    min-height: 100vh;
  }

  /* â”€â”€ ãƒ˜ãƒƒãƒ€ãƒ¼ â”€â”€ */
  header {
    background: var(--warm-brown);
    padding: 18px 28px;
    display: flex;
    align-items: center;
    gap: 16px;
    box-shadow: 0 2px 12px var(--shadow);
  }
  header .logo {
    font-family: 'Kaisei Decol', serif;
    font-size: 1.45rem;
    color: #fff;
    line-height: 1.3;
  }
  header .logo span {
    display: block;
    font-size: 0.72rem;
    font-family: 'Noto Sans JP', sans-serif;
    font-weight: 300;
    letter-spacing: 0.12em;
    color: #f0d9b5;
    margin-top: 2px;
  }
  header .tag {
    margin-left: auto;
    background: var(--accent-orange);
    color: #fff;
    font-size: 0.65rem;
    padding: 3px 10px;
    border-radius: 20px;
    font-weight: 500;
    letter-spacing: 0.05em;
  }
  .updated-badge {
    font-size: 0.63rem;
    color: #c4a87a;
    margin-left: 8px;
  }

  /* â”€â”€ ãƒ¡ã‚¤ãƒ³ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ â”€â”€ */
  .main-wrap {
    max-width: 1200px;
    margin: 0 auto;
    padding: 28px 20px 60px;
  }

  /* â”€â”€ ãƒ“ãƒ¥ãƒ¼åˆ‡æ›¿ â”€â”€ */
  .view-tabs {
    display: flex;
    gap: 8px;
    margin-bottom: 20px;
  }
  .view-tab {
    padding: 8px 20px;
    border-radius: 24px;
    border: 2px solid var(--border);
    background: #fff;
    color: var(--text-mid);
    font-size: 0.82rem;
    cursor: pointer;
    font-family: 'Noto Sans JP', sans-serif;
    font-weight: 500;
    transition: all 0.18s;
  }
  .view-tab.active {
    background: var(--warm-brown);
    border-color: var(--warm-brown);
    color: #fff;
  }
  .view-tab:hover:not(.active) {
    border-color: var(--accent-orange);
    color: var(--accent-orange);
  }

  /* â”€â”€ ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ â”€â”€ */
  .filter-bar {
    background: #fff;
    border: 1.5px solid var(--border);
    border-radius: 16px;
    padding: 18px 22px;
    margin-bottom: 24px;
    display: flex;
    flex-wrap: wrap;
    gap: 14px;
    align-items: center;
    box-shadow: 0 2px 8px var(--shadow);
  }
  .filter-group {
    display: flex;
    flex-direction: column;
    gap: 6px;
    min-width: 160px;
  }
  .filter-label {
    font-size: 0.68rem;
    font-weight: 700;
    color: var(--text-mid);
    letter-spacing: 0.06em;
    text-transform: uppercase;
  }
  .filter-select {
    border: 1.5px solid var(--border);
    border-radius: 8px;
    padding: 7px 12px;
    font-size: 0.82rem;
    color: var(--text-dark);
    font-family: 'Noto Sans JP', sans-serif;
    background: var(--cream);
    cursor: pointer;
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8' viewBox='0 0 12 8'%3E%3Cpath d='M1 1l5 5 5-5' stroke='%236b5742' stroke-width='1.5' fill='none' stroke-linecap='round'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 10px center;
    padding-right: 28px;
  }
  .filter-select:focus { outline: none; border-color: var(--accent-orange); }
  .filter-reset {
    margin-left: auto;
    background: none;
    border: 1.5px solid var(--border);
    border-radius: 8px;
    padding: 7px 14px;
    color: var(--text-mid);
    font-size: 0.78rem;
    cursor: pointer;
    font-family: 'Noto Sans JP', sans-serif;
    transition: all 0.15s;
    align-self: flex-end;
  }
  .filter-reset:hover { border-color: var(--accent-orange); color: var(--accent-orange); }

  /* â”€â”€ ä»¶æ•°ãƒãƒƒã‚¸ â”€â”€ */
  .count-bar {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 16px;
    font-size: 0.82rem;
    color: var(--text-mid);
  }
  .count-num {
    font-weight: 700;
    color: var(--accent-orange);
    font-size: 1.2rem;
  }

  /* â”€â”€ ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ“ãƒ¥ãƒ¼ â”€â”€ */
  #calendar-view { display: block; }
  #list-view { display: none; }

  .fc {
    background: #fff;
    border-radius: 16px;
    padding: 20px;
    box-shadow: 0 2px 10px var(--shadow);
    border: 1.5px solid var(--border);
  }
  .fc .fc-toolbar-title {
    font-family: 'Kaisei Decol', serif;
    font-size: 1.2rem;
    color: var(--warm-brown);
  }
  .fc .fc-button-primary {
    background: var(--warm-brown) !important;
    border-color: var(--warm-brown) !important;
    font-family: 'Noto Sans JP', sans-serif !important;
    font-size: 0.8rem !important;
  }
  .fc .fc-button-primary:hover {
    background: var(--accent-orange) !important;
    border-color: var(--accent-orange) !important;
  }
  .fc-event {
    border-radius: 5px !important;
    border: none !important;
    font-size: 0.75rem !important;
    font-weight: 500 !important;
    padding: 2px 5px !important;
    cursor: pointer !important;
  }
  .fc-daygrid-day-number, .fc-col-header-cell-cushion {
    color: var(--text-dark) !important;
    font-weight: 500 !important;
  }

  /* â”€â”€ ãƒªã‚¹ãƒˆãƒ“ãƒ¥ãƒ¼ â”€â”€ */
  .event-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    gap: 18px;
  }
  .event-card {
    background: #fff;
    border-radius: 16px;
    border: 1.5px solid var(--border);
    overflow: hidden;
    box-shadow: 0 2px 8px var(--shadow);
    transition: transform 0.18s, box-shadow 0.18s;
    cursor: pointer;
  }
  .event-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 6px 20px var(--shadow);
  }
  .card-accent {
    height: 5px;
  }
  .card-body { padding: 18px 20px; }
  .card-category {
    display: inline-block;
    font-size: 0.65rem;
    font-weight: 700;
    letter-spacing: 0.08em;
    padding: 3px 10px;
    border-radius: 20px;
    margin-bottom: 10px;
    color: #fff;
  }
  .card-title {
    font-weight: 700;
    font-size: 0.95rem;
    line-height: 1.5;
    margin-bottom: 12px;
    color: var(--text-dark);
  }
  .card-meta {
    display: flex;
    flex-direction: column;
    gap: 5px;
  }
  .card-meta-row {
    display: flex;
    align-items: flex-start;
    gap: 8px;
    font-size: 0.78rem;
    color: var(--text-mid);
  }
  .card-meta-icon { flex-shrink: 0; margin-top: 1px; }
  .card-age-badge {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    background: var(--light-orange);
    color: var(--accent-orange);
    border-radius: 20px;
    font-size: 0.68rem;
    font-weight: 700;
    padding: 3px 10px;
    margin-top: 10px;
  }
  .card-footer {
    padding: 12px 20px;
    background: var(--cream);
    border-top: 1.5px solid var(--border);
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  .card-link {
    font-size: 0.72rem;
    color: var(--accent-orange);
    text-decoration: none;
    font-weight: 700;
    letter-spacing: 0.04em;
  }
  .card-link:hover { text-decoration: underline; }
  .card-apply {
    font-size: 0.7rem;
    color: var(--text-mid);
    max-width: 200px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  /* â”€â”€ ãƒ¢ãƒ¼ãƒ€ãƒ« â”€â”€ */
  .modal-overlay {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(44, 31, 14, 0.55);
    z-index: 1000;
    align-items: center;
    justify-content: center;
    padding: 20px;
  }
  .modal-overlay.open { display: flex; }
  .modal {
    background: #fff;
    border-radius: 20px;
    max-width: 520px;
    width: 100%;
    box-shadow: 0 12px 40px rgba(0,0,0,0.25);
    overflow: hidden;
    animation: modalIn 0.22s ease;
  }
  @keyframes modalIn {
    from { opacity: 0; transform: translateY(20px) scale(0.97); }
    to { opacity: 1; transform: none; }
  }
  .modal-header {
    padding: 22px 24px 18px;
    border-bottom: 1.5px solid var(--border);
    position: relative;
  }
  .modal-cat {
    font-size: 0.65rem;
    font-weight: 700;
    letter-spacing: 0.08em;
    padding: 3px 10px;
    border-radius: 20px;
    color: #fff;
    display: inline-block;
    margin-bottom: 10px;
  }
  .modal-title {
    font-family: 'Kaisei Decol', serif;
    font-size: 1.15rem;
    line-height: 1.5;
    color: var(--text-dark);
  }
  .modal-close {
    position: absolute;
    top: 16px; right: 16px;
    background: var(--cream);
    border: none;
    border-radius: 50%;
    width: 32px; height: 32px;
    cursor: pointer;
    font-size: 1.1rem;
    display: flex; align-items: center; justify-content: center;
    color: var(--text-mid);
    transition: background 0.15s;
  }
  .modal-close:hover { background: var(--border); }
  .modal-body { padding: 20px 24px; }
  .modal-info-row {
    display: flex;
    gap: 10px;
    align-items: flex-start;
    padding: 10px 0;
    border-bottom: 1px solid var(--border);
    font-size: 0.85rem;
    color: var(--text-mid);
  }
  .modal-info-row:last-child { border-bottom: none; }
  .modal-info-icon { flex-shrink: 0; font-size: 1rem; margin-top: 1px; }
  .modal-info-label { font-weight: 700; color: var(--text-dark); margin-bottom: 2px; font-size: 0.72rem; letter-spacing: 0.06em; }
  .modal-preview {
    margin-top: 14px;
    background: var(--cream);
    border-radius: 10px;
    padding: 14px 16px;
    font-size: 0.8rem;
    color: var(--text-mid);
    line-height: 1.7;
  }
  .modal-footer {
    padding: 16px 24px;
    border-top: 1.5px solid var(--border);
    display: flex;
    gap: 10px;
  }
  .btn-primary {
    flex: 1;
    background: var(--accent-orange);
    color: #fff;
    border: none;
    border-radius: 10px;
    padding: 11px;
    font-size: 0.82rem;
    font-weight: 700;
    font-family: 'Noto Sans JP', sans-serif;
    cursor: pointer;
    text-decoration: none;
    text-align: center;
    transition: background 0.15s;
  }
  .btn-primary:hover { background: #c56a2b; }
  .btn-secondary {
    padding: 11px 16px;
    background: #fff;
    border: 1.5px solid var(--border);
    border-radius: 10px;
    font-size: 0.82rem;
    color: var(--text-mid);
    cursor: pointer;
    font-family: 'Noto Sans JP', sans-serif;
    transition: all 0.15s;
  }
  .btn-secondary:hover { border-color: var(--accent-orange); color: var(--accent-orange); }

  /* â”€â”€ ç©º â”€â”€ */
  .empty-state {
    text-align: center;
    padding: 60px 20px;
    color: var(--text-mid);
  }
  .empty-state .icon { font-size: 3rem; margin-bottom: 12px; }
  .empty-state p { font-size: 0.9rem; }

  /* â”€â”€ ã‚«ãƒ†ã‚´ãƒªè‰² â”€â”€ */
  .color-é£Ÿè‚² { background: #5a9168; }
  .color-å¥åº· { background: #4a7fab; }
  .color-ç™ºé” { background: #7b5ea7; }
  .color-è¦ªå­ { background: #d4607e; }
  .color-çˆ¶è¦ª { background: #e07b39; }
  .color-ç”£å‰ { background: #c0854e; }
  .color-ã²ã¨ã‚Šè¦ª { background: #6b8cba; }
  .color-ãã®ä»– { background: #8a8a8a; }

  @media (max-width: 600px) {
    header { padding: 14px 18px; }
    header .logo { font-size: 1.1rem; }
    .event-grid { grid-template-columns: 1fr; }
    .filter-bar { padding: 14px 16px; }
    .fc { padding: 12px 6px; }
  }
</style>
</head>
<body>

<header>
  <div>
    <div class="logo">
      ç†Šæœ¬å¸‚ å­è‚²ã¦æ”¯æ´
      <span>KUMAMOTO CHILDCARE SUPPORT EVENTS</span>
    </div>
  </div>
  <span class="tag">ğŸŠ è¬›ç¿’ä¼šãƒ»è¬›åº§ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ v3</span>
</header>

<div class="main-wrap">

  <!-- ãƒ“ãƒ¥ãƒ¼åˆ‡æ›¿ -->
  <div class="view-tabs">
    <button class="view-tab active" onclick="switchView('calendar')">ğŸ“… ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼</button>
    <button class="view-tab" onclick="switchView('list')">ğŸ“‹ ãƒªã‚¹ãƒˆ</button>
  </div>

  <!-- ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ -->
  <div class="filter-bar">
    <div class="filter-group">
      <div class="filter-label">ğŸ“‚ ã‚«ãƒ†ã‚´ãƒª</div>
      <select class="filter-select" id="filter-category" onchange="applyFilters()">
        <option value="">ã™ã¹ã¦</option>
        <option>é£Ÿè‚²ãƒ»æ „é¤Š</option>
        <option>å¥åº·ãƒ»åŒ»ç™‚</option>
        <option>ç™ºé”ãƒ»è‚²å…ç›¸è«‡</option>
        <option>è¦ªå­ãµã‚Œã‚ã„</option>
        <option>çˆ¶è¦ªãƒ»å®¶æ—æ”¯æ´</option>
        <option>ç”£å‰ãƒ»ç”£å¾Œ</option>
        <option>ã²ã¨ã‚Šè¦ªæ”¯æ´</option>
        <option>ãã®ä»–</option>
      </select>
    </div>
    <div class="filter-group">
      <div class="filter-label">ğŸ‘¶ å¯¾è±¡å¹´é½¢</div>
      <select class="filter-select" id="filter-age" onchange="applyFilters()">
        <option value="">ã™ã¹ã¦</option>
        <option>å¦Šå¨ ä¸­</option>
        <option>0æ­³</option>
        <option>1ã€œ2æ­³</option>
        <option>3ã€œ5æ­³</option>
        <option>å°å­¦ç”Ÿä»¥ä¸Š</option>
        <option>0æ­³ã€œæœªå°±å­¦</option>
        <option>æŒ‡å®šãªã—</option>
      </select>
    </div>
    <button class="filter-reset" onclick="resetFilters()">âœ• ãƒªã‚»ãƒƒãƒˆ</button>
  </div>

  <!-- ä»¶æ•° -->
  <div class="count-bar">
    <span class="count-num" id="event-count">0</span>
    <span>ä»¶ã®ã‚¤ãƒ™ãƒ³ãƒˆãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸ</span>
    <span class="updated-badge" id="updated-at"></span>
  </div>

  <!-- ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ“ãƒ¥ãƒ¼ -->
  <div id="calendar-view">
    <div id="fc-calendar"></div>
  </div>

  <!-- ãƒªã‚¹ãƒˆãƒ“ãƒ¥ãƒ¼ -->
  <div id="list-view">
    <div class="event-grid" id="event-grid"></div>
    <div class="empty-state" id="empty-state" style="display:none;">
      <div class="icon">ğŸ”</div>
      <p>æ¡ä»¶ã«ä¸€è‡´ã™ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆãŒã‚ã‚Šã¾ã›ã‚“</p>
    </div>
  </div>

</div>

<!-- ãƒ¢ãƒ¼ãƒ€ãƒ« -->
<div class="modal-overlay" id="modal-overlay" onclick="closeModal(event)">
  <div class="modal" id="modal">
    <div class="modal-header">
      <button class="modal-close" onclick="closeModal()">âœ•</button>
      <div class="modal-cat" id="modal-cat"></div>
      <div class="modal-title" id="modal-title"></div>
    </div>
    <div class="modal-body">
      <div class="modal-info-row">
        <span class="modal-info-icon">ğŸ“…</span>
        <div>
          <div class="modal-info-label">æ—¥æ™‚</div>
          <div id="modal-date"></div>
        </div>
      </div>
      <div class="modal-info-row">
        <span class="modal-info-icon">ğŸ“</span>
        <div>
          <div class="modal-info-label">å ´æ‰€</div>
          <div id="modal-location"></div>
        </div>
      </div>
      <div class="modal-info-row">
        <span class="modal-info-icon">ğŸ‘¶</span>
        <div>
          <div class="modal-info-label">å¯¾è±¡å¹´é½¢</div>
          <div id="modal-age"></div>
        </div>
      </div>
      <div class="modal-info-row">
        <span class="modal-info-icon">ğŸ“</span>
        <div>
          <div class="modal-info-label">ç”³è¾¼æƒ…å ±</div>
          <div id="modal-apply"></div>
        </div>
      </div>
      <div class="modal-preview" id="modal-preview"></div>
    </div>
    <div class="modal-footer">
      <a class="btn-primary" id="modal-link" href="#" target="_blank" rel="noopener">è©³ç´°ãƒšãƒ¼ã‚¸ã‚’è¦‹ã‚‹ â†’</a>
      <button class="btn-secondary" onclick="closeModal()">é–‰ã˜ã‚‹</button>
    </div>
  </div>
</div>

<script>
/* EVENTS_DATA_START */
const INLINE_EVENTS = {"updated_at": "2026-02-20T14:45:39.060556", "count": 27, "events": [{"title": "å­è‚²ã¦ä¸­ã®ãƒãƒã®ãŸã‚ã®ãŠé‡‘ã®æ•™å®¤", "date_raw": "2026å¹´3æœˆ3æ—¥", "date_iso": "2026-03-03", "time_raw": "", "location": "", "apply_info": "", "category": "ç”Ÿæ´»æ”¯æ´", "target_age": "æŒ‡å®šãªã—", "url": "https://www.kumamoto-kekkon-kosodate.jp/page1788.html", "body_preview": ""}, {"title": "å‡ºç”£ãƒ»è‚²å…ã«å‚™ãˆã‚‹ã€€ãƒãƒã®ç¾ãƒœãƒ‡ã‚£ãƒ¨ã‚¬ï¼ˆ4æœˆï¼‰", "date_raw": "2026å¹´4æœˆ21æ—¥", "date_iso": "2026-04-21", "time_raw": "", "location": "", "apply_info": "", "category": "ç™ºé”ãƒ»è‚²å…ç›¸è«‡", "target_age": "æŒ‡å®šãªã—", "url": "https://www.kumamoto-kekkon-kosodate.jp/page1589.html", "body_preview": ""}, {"title": "ãƒ™ãƒ“ãƒ¼ãƒãƒƒã‚µãƒ¼ã‚¸ï¼†ãµã‚Œã‚ã„éŠã³ï¼ˆ4æœˆï¼‰", "date_raw": "2026å¹´4æœˆ20æ—¥", "date_iso": "2026-04-20", "time_raw": "", "location": "", "apply_info": "", "category": "è¦ªå­ãµã‚Œã‚ã„", "target_age": "0æ­³", "url": "https://www.kumamoto-kekkon-kosodate.jp/page1740.html", "body_preview": ""}, {"title": "è¦ªå­ã§ãƒªãƒˆãƒŸãƒƒã‚¯æ•™å®¤(4æœˆ)", "date_raw": "2026å¹´4æœˆ14æ—¥", "date_iso": "2026-04-14", "time_raw": "", "location": "", "apply_info": "", "category": "è¦ªå­ãµã‚Œã‚ã„", "target_age": "æŒ‡å®šãªã—", "url": "https://www.kumamoto-kekkon-kosodate.jp/page1417.html", "body_preview": ""}, {"title": "ç”£å¾Œãƒãƒã®éª¨ç›¤ã¨ã‚³ã‚³ãƒ­ã®ã‚±ã‚¢ãƒ¨ã‚¬ï¼ˆ4æœˆï¼‰", "date_raw": "2026å¹´4æœˆ8æ—¥", "date_iso": "2026-04-08", "time_raw": "", "location": "", "apply_info": "", "category": "ç”£å‰ãƒ»ç”£å¾Œ", "target_age": "0æ­³", "url": "https://www.kumamoto-kekkon-kosodate.jp/page1600.html", "body_preview": ""}, {"title": "ç”£å¾Œãƒãƒã®éª¨ç›¤èª¿æ•´ã‚¨ã‚¯ã‚µã‚µã‚¤ã‚ºï¼†ãƒ”ãƒ©ãƒ†ã‚£ã‚¹ï¼ˆ4æœˆï¼‰", "date_raw": "2026å¹´4æœˆ7æ—¥", "date_iso": "2026-04-07", "time_raw": "", "location": "", "apply_info": "", "category": "ç”£å‰ãƒ»ç”£å¾Œ", "target_age": "0æ­³", "url": "https://www.kumamoto-kekkon-kosodate.jp/page1924.html", "body_preview": ""}, {"title": "å­è‚²ã¦ãƒãƒã®ã‚«ãƒ©ãƒ¼ï¼†ãƒ¡ã‚¤ã‚¯ãƒ¬ãƒƒã‚¹ãƒ³ï¼ˆ4æœˆï¼‰", "date_raw": "2026å¹´4æœˆ6æ—¥", "date_iso": "2026-04-06", "time_raw": "", "location": "", "apply_info": "", "category": "ç”Ÿæ´»æ”¯æ´", "target_age": "æŒ‡å®šãªã—", "url": "https://www.kumamoto-kekkon-kosodate.jp/page1930.html", "body_preview": ""}, {"title": "ç†å­¦ç™‚æ³•å£«ãŒæ•™ãˆã‚‹ã€€ç”£å¾Œãƒ€ã‚¤ã‚¨ãƒƒãƒˆï¼ˆ4æœˆï¼‰", "date_raw": "2026å¹´4æœˆ3æ—¥", "date_iso": "2026-04-03", "time_raw": "", "location": "", "apply_info": "", "category": "ç”£å‰ãƒ»ç”£å¾Œ", "target_age": "0æ­³", "url": "https://www.kumamoto-kekkon-kosodate.jp/page1939.html", "body_preview": ""}, {"title": "ç”£å¾Œã‚±ã‚¢ï¼†éª¨ç›¤ã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒ‹ãƒ³ã‚°è¬›åº§ï¼ˆ4æœˆï¼‰", "date_raw": "2026å¹´4æœˆ2æ—¥", "date_iso": "2026-04-02", "time_raw": "", "location": "", "apply_info": "", "category": "ç”£å‰ãƒ»ç”£å¾Œ", "target_age": "0æ­³", "url": "https://www.kumamoto-kekkon-kosodate.jp/page1936.html", "body_preview": ""}, {"title": "ç†ç³»ã®ãƒ­ãƒ¼ãƒ«ãƒ¢ãƒ‡ãƒ«è¬›æ¼”ä¼šï¼ˆã‚ªãƒ³ãƒ©ã‚¤ãƒ³ï¼‰ã‚’é–‹å‚¬!!", "date_raw": "2026å¹´3æœˆ8æ—¥", "date_iso": "2026-03-08", "time_raw": "", "location": "", "apply_info": "", "category": "ãã®ä»–", "target_age": "æŒ‡å®šãªã—", "url": "https://www.kumamoto-kekkon-kosodate.jp/page1606.html", "body_preview": ""}, {"title": "2æœˆ22æ—¥ï¼ˆæ—¥æ›œæ—¥ï¼‰ã‚µãƒã‚¤ãƒãƒ«ãƒˆãƒ¬ã‚¸ãƒ£ãƒ¼ï¼", "date_raw": "2026å¹´2æœˆ22æ—¥", "date_iso": "2026-02-22", "time_raw": "", "location": "", "apply_info": "", "category": "ãã®ä»–", "target_age": "æŒ‡å®šãªã—", "url": "https://www.kumamoto-kekkon-kosodate.jp/page1657.html", "body_preview": ""}, {"title": "ã¨ã‚‰ãƒãƒƒã‚±ã®ãŠè©±ä¼šã€€çŸ¥ã‚‹ã“ã¨ã‹ã‚‰å§‹ã‚ã‚‹ç™ºé”éšœå®³ã®ã‚ã‚‹äººã®ã¨ã®é–¢ã‚ã‚Š", "date_raw": "2026å¹´2æœˆ22æ—¥", "date_iso": "2026-02-22", "time_raw": "", "location": "", "apply_info": "", "category": "ç™ºé”ãƒ»è‚²å…ç›¸è«‡", "target_age": "æŒ‡å®šãªã—", "url": "https://www.kumamoto-kekkon-kosodate.jp/page1919.html", "body_preview": ""}, {"title": "ã³ã‚ã®æœ¨æ–‡åº«ï¼ˆæ±åŒºè¥¿åŸ1ä¸ç›®ï¼‰ã§ã®å…ç«¥æ›¸ã®è²¸ã—å‡ºã—ï¼ˆ2æœˆï¼‰", "date_raw": "2026å¹´2æœˆ7æ—¥", "date_iso": "2026-02-07", "time_raw": "", "location": "", "apply_info": "", "category": "ãã®ä»–", "target_age": "æŒ‡å®šãªã—", "url": "https://www.kumamoto-kekkon-kosodate.jp/page1775.html", "body_preview": ""}, {"title": "ãŠã¯ãªã—ãƒœãƒ©ãƒ³ãƒ†ã‚£ã‚¢ã€Œã³ã‚ã®æœ¨ã€", "date_raw": "2026å¹´2æœˆ21æ—¥", "date_iso": "2026-02-21", "time_raw": "", "location": "", "apply_info": "", "category": "ãã®ä»–", "target_age": "æŒ‡å®šãªã—", "url": "https://www.kumamoto-kekkon-kosodate.jp/page1496.html", "body_preview": ""}, {"title": "å°å­¦ç”Ÿã§èº«ã«ã¤ã‘ãŸã„ãƒãƒ¬ãƒ¼ã®åŸºç¤ã‚’å­¦ã¼ã†ï¼ã‚¢ã‚¹ãƒªãƒ¼ãƒˆã‚³ãƒ¼ã‚¹ç·¨", "date_raw": "2026å¹´2æœˆ15æ—¥", "date_iso": "2026-02-15", "time_raw": "", "location": "", "apply_info": "", "category": "ãã®ä»–", "target_age": "å°å­¦ç”Ÿä»¥ä¸Š", "url": "https://www.kumamoto-kekkon-kosodate.jp/page1920.html", "body_preview": ""}, {"title": "ãƒ—ãƒ¬ãƒãƒ¬ãƒ¼ã§éŠã¼ã†ï¼ã‚­ãƒƒã‚ºç·¨ãƒ»ãƒ“ã‚®ãƒŠãƒ¼ç·¨", "date_raw": "2026å¹´2æœˆ15æ—¥", "date_iso": "2026-02-15", "time_raw": "", "location": "", "apply_info": "", "category": "ãã®ä»–", "target_age": "æŒ‡å®šãªã—", "url": "https://www.kumamoto-kekkon-kosodate.jp/page1965.html", "body_preview": ""}, {"title": "å­è‚²ã¦å¿œæ´ã‚»ãƒŸãƒŠãƒ¼", "date_raw": "2026å¹´2æœˆ11æ—¥", "date_iso": "2026-02-11", "time_raw": "", "location": "", "apply_info": "", "category": "ãã®ä»–", "target_age": "æŒ‡å®šãªã—", "url": "https://www.kumamoto-kekkon-kosodate.jp/page1370.html", "body_preview": ""}, {"title": "ã€å¤©ä½¿ã‚«ãƒ•ã‚§ã€‘in ç†Šæœ¬ å”åŠ›:ã€Œã¿ã‚“ãªã®å’Œã€", "date_raw": "2026å¹´4æœˆ23æ—¥", "date_iso": "2026-04-23", "time_raw": "", "location": "", "apply_info": "", "category": "ãã®ä»–", "target_age": "æŒ‡å®šãªã—", "url": "https://www.kumamoto-kekkon-kosodate.jp/page1710.html", "body_preview": ""}, {"title": "SOMPOã‚±ã‚¢ ãã‚“ã½ã®å®¶æ¸…æ°´éº»ç”Ÿç”° å­ã©ã‚‚é£Ÿå ‚  2æœˆ28æ—¥", "date_raw": "2026å¹´2æœˆ28æ—¥", "date_iso": "2026-02-28", "time_raw": "", "location": "", "apply_info": "", "category": "ãã®ä»–", "target_age": "æŒ‡å®šãªã—", "url": "https://www.kumamoto-kekkon-kosodate.jp/page1696.html", "body_preview": ""}, {"title": "èµ¤ã¡ã‚ƒã‚“ã®å‘ãç™–ã€é ­ã®å½¢ç›¸è«‡ä¼šğŸ˜Š", "date_raw": "2026å¹´2æœˆ26æ—¥", "date_iso": "2026-02-26", "time_raw": "", "location": "", "apply_info": "", "category": "ç™ºé”ãƒ»è‚²å…ç›¸è«‡", "target_age": "æŒ‡å®šãªã—", "url": "https://www.kumamoto-kekkon-kosodate.jp/page1956.html", "body_preview": ""}, {"title": "2æœˆ20æ—¥é–‹å‚¬ãƒ—ãƒã‚»ãƒŸãƒŠãƒ¼ã€æ¬²æ±‚ãŒæ¸¦å·»ãã¯ã˜ã‚ã‚‹ãƒœã‚¯ã¯1æ­³å…ãªã®ã ï¼ã€", "date_raw": "2026å¹´2æœˆ20æ—¥", "date_iso": "2026-02-20", "time_raw": "", "location": "", "apply_info": "", "category": "ãã®ä»–", "target_age": "1ã€œ2æ­³", "url": "https://www.kumamoto-kekkon-kosodate.jp/page1763.html", "body_preview": ""}, {"title": "ãƒ—ãƒ¬ãƒ‘ãƒ‘ãƒãƒæ•™å®¤", "date_raw": "2026å¹´3æœˆ29æ—¥", "date_iso": "2026-03-29", "time_raw": "", "location": "", "apply_info": "", "category": "çˆ¶è¦ªãƒ»å®¶æ—æ”¯æ´", "target_age": "æŒ‡å®šãªã—", "url": "https://www.kumamoto-kekkon-kosodate.jp/page1946.html", "body_preview": ""}, {"title": "ç¬¬äºŒå›ãƒ„ã‚¤ãƒ³ã‚ºäº¤æµä¼šâ™«", "date_raw": "2026å¹´2æœˆ21æ—¥", "date_iso": "2026-02-21", "time_raw": "", "location": "", "apply_info": "", "category": "ãã®ä»–", "target_age": "æŒ‡å®šãªã—", "url": "https://www.kumamoto-kekkon-kosodate.jp/page1967.html", "body_preview": ""}, {"title": "è‹±èªã§ã‚ãã¼ã†", "date_raw": "2026å¹´2æœˆ27æ—¥", "date_iso": "2026-02-27", "time_raw": "", "location": "", "apply_info": "", "category": "ãã®ä»–", "target_age": "æŒ‡å®šãªã—", "url": "https://www.kumamoto-kekkon-kosodate.jp/page1955.html", "body_preview": ""}, {"title": "Baby English", "date_raw": "2026å¹´2æœˆ20æ—¥", "date_iso": "2026-02-20", "time_raw": "", "location": "", "apply_info": "", "category": "ãã®ä»–", "target_age": "æŒ‡å®šãªã—", "url": "https://www.kumamoto-kekkon-kosodate.jp/page1931.html", "body_preview": ""}, {"title": "ã³ã‚ã®æœ¨æ–‡åº«ï¼ˆæ±åŒºè¥¿åŸ1ä¸ç›®ï¼‰ã§ã®å…ç«¥æ›¸ã®è²¸ã—å‡ºã—", "date_raw": "2026å¹´1æœˆ24æ—¥", "date_iso": "2026-01-24", "time_raw": "", "location": "", "apply_info": "", "category": "ãã®ä»–", "target_age": "æŒ‡å®šãªã—", "url": "https://www.kumamoto-kekkon-kosodate.jp/page1881.html", "body_preview": ""}, {"title": "ãƒ—ãƒ¬ãƒ‘ãƒ‘ãƒãƒæ•™å®¤", "date_raw": "2025å¹´11æœˆ22æ—¥", "date_iso": "2025-11-22", "time_raw": "", "location": "", "apply_info": "", "category": "çˆ¶è¦ªãƒ»å®¶æ—æ”¯æ´", "target_age": "æŒ‡å®šãªã—", "url": "https://www.kumamoto-kekkon-kosodate.jp/page1263.html", "body_preview": ""}]};
/* EVENTS_DATA_END */
const CATEGORY_COLORS = {
  "é£Ÿè‚²ãƒ»æ „é¤Š":   "#5a9168",
  "å¥åº·ãƒ»åŒ»ç™‚":   "#4a7fab",
  "ç™ºé”ãƒ»è‚²å…ç›¸è«‡": "#7b5ea7",
  "è¦ªå­ãµã‚Œã‚ã„": "#d4607e",
  "çˆ¶è¦ªãƒ»å®¶æ—æ”¯æ´": "#e07b39",
  "ç”£å‰ãƒ»ç”£å¾Œ":   "#c0854e",
  "ã²ã¨ã‚Šè¦ªæ”¯æ´": "#6b8cba",
  "ç”Ÿæ´»æ”¯æ´":    "#b07d4a",
  "ãã®ä»–":      "#8a8a8a",
};

function catColor(c) { return CATEGORY_COLORS[c] || "#8a8a8a"; }
function catKey(c) { return (c||"ãã®ä»–").replace(/[ãƒ»\s]/g,"_"); }

function parseDate(raw) {
  if (!raw) return null;
  const m = raw.match(/(\d{4})[å¹´\/\-](\d{1,2})[æœˆ\/\-](\d{1,2})/);
  if (m) return m[1] + "-" + m[2].padStart(2,"0") + "-" + m[3].padStart(2,"0");
  return null;
}

let allEvents = [];
let calendar = null;
let currentView = "calendar";

function loadEvents() {
  const updEl = document.getElementById("updated-at");
  if (INLINE_EVENTS && INLINE_EVENTS.events) {
    allEvents = INLINE_EVENTS.events;
    if (updEl && INLINE_EVENTS.updated_at) {
      const d = new Date(INLINE_EVENTS.updated_at);
      updEl.textContent = (d.getMonth()+1) + "/" + d.getDate() + " æ›´æ–° " + allEvents.length + "ä»¶";
    }
  } else {
    allEvents = [];
    if (updEl) { updEl.textContent = "ãƒ‡ãƒ¼ã‚¿ãªã—"; updEl.style.color="red"; }
  }
  applyFilters();
}

function getFilteredEvents() {
  const cat = (document.getElementById("filter-category")||{}).value || "";
  const age = (document.getElementById("filter-age")||{}).value || "";
  return allEvents.filter(ev => {
    if (cat && ev.category !== cat) return false;
    if (age && ev.target_age !== age) return false;
    return true;
  });
}

function applyFilters() {
  const filtered = getFilteredEvents();
  const countEl = document.getElementById("event-count");
  if (countEl) countEl.textContent = filtered.length;
  renderList(filtered);
  renderCalendar(filtered);
}

function resetFilters() {
  const c = document.getElementById("filter-category");
  const a = document.getElementById("filter-age");
  if (c) c.value = "";
  if (a) a.value = "";
  applyFilters();
}

function renderList(events) {
  const grid = document.getElementById("event-grid");
  const empty = document.getElementById("empty-state");
  if (!grid) return;
  if (events.length === 0) {
    grid.innerHTML = "";
    if (empty) empty.style.display = "block";
    return;
  }
  if (empty) empty.style.display = "none";
  grid.innerHTML = events.map(ev => {
    const color = catColor(ev.category);
    const key = catKey(ev.category);
    const safeEv = JSON.stringify(ev).replace(/"/g, "&quot;");
    return `<div class="event-card" onclick="window.open(this.dataset.url, '_blank')">` +
      `<div class="card-accent" style="background:${color}"></div>` +
      `<div class="card-body">` +
      `<span class="card-category" style="background:${color}">${ev.category}</span>` +
      `<div class="card-title">${ev.title}</div>` +
      `<div class="card-meta">` +
      `<div class="card-meta-row"><span class="card-meta-icon">ğŸ“…</span><span>${ev.date_raw||"æ—¥ç¨‹æœªå®š"}</span></div>` +
      (ev.location ? `<div class="card-meta-row"><span class="card-meta-icon">ğŸ“</span><span>${ev.location}</span></div>` : "") +
      `</div>` +
      `<div class="card-age-badge">ğŸ‘¶ ${ev.target_age}</div>` +
      `</div>` +
      `<div class="card-footer">` +
      `<a class="card-link" href="${ev.url}" target="_blank" rel="noopener" onclick="event.stopPropagation()">è©³ç´° â†’</a>` +
      `</div>` +
      `</div>`;
  }).join("");
  // data-evå±æ€§ã«JSONã‚’è¨­å®š
  grid.querySelectorAll(".event-card").forEach((card, i) => {
    card.dataset.ev = JSON.stringify(events[i]);
    card.dataset.url = events[i].url || '#';
  });
}

function renderCalendar(events) {
  const fcEvents = events.map(ev => {
    const date = parseDate(ev.date_raw) || ev.date_iso;
    if (!date) return null;
    return { title: ev.title, start: date, backgroundColor: catColor(ev.category), borderColor: catColor(ev.category), extendedProps: ev };
  }).filter(Boolean);

  if (calendar) {
    calendar.removeAllEvents();
    calendar.addEventSource(fcEvents);
    return;
  }

  const el = document.getElementById("fc-calendar");
  if (!el) return;
  calendar = new FullCalendar.Calendar(el, {
    initialView: "dayGridMonth",
    locale: "ja",
    headerToolbar: { left: "prev,next today", center: "title", right: "dayGridMonth,listMonth" },
    buttonText: { today: "ä»Šæœˆ", month: "æœˆ", list: "ãƒªã‚¹ãƒˆ" },
    events: fcEvents,
    eventClick: function(info) { window.open(info.event.extendedProps.url, '_blank'); },
    height: "auto",
  });
  calendar.render();
}

function switchView(view) {
  currentView = view;
  document.getElementById("calendar-view").style.display = view === "calendar" ? "block" : "none";
  document.getElementById("list-view").style.display = view === "list" ? "block" : "none";
  document.querySelectorAll(".view-btn").forEach(b => b.classList.remove("active"));
  const btn = document.getElementById("btn-" + view);
  if (btn) btn.classList.add("active");
  if (view === "calendar" && calendar) calendar.updateSize();
}

function openModal(ev) {
  if (typeof ev === "string") ev = JSON.parse(ev);
  document.getElementById("modal-title").textContent = ev.title || "";
  document.getElementById("modal-date").textContent = ev.date_raw || "";
  document.getElementById("modal-location").textContent = ev.location || "è¨˜è¼‰ãªã—";
  document.getElementById("modal-age").textContent = ev.target_age || "";
  document.getElementById("modal-apply").textContent = ev.apply_info || "è©³ç´°ãƒšãƒ¼ã‚¸ã‚’ã”ç¢ºèªãã ã•ã„";
  const link = document.getElementById("modal-link");
  if (link) link.href = ev.url || "#";
  document.getElementById("event-modal").style.display = "flex";
}

function closeModal() {
  document.getElementById("event-modal").style.display = "none";
}

window.onload = loadEvents;
</script>
</body>
</html>
